-- ============================================
-- VICTORIA HUB - MINIMAL WORKING VERSION
-- ============================================

print("[1] Loading UI library...")

-- Load dengan error handling EXTREME
local Vict
local function LoadLibrary()
    for i = 1, 3 do  -- Retry 3x
        local success, result = pcall(function()
            return loadstring(game:HttpGet(
                "https://raw.githubusercontent.com/WhoIsGenn/VICTUI/refs/heads/main/ui.lua",
                true  -- mungkin butuh ini
            ))()
        end)
        
        if success and result then
            print("[SUCCESS] Library loaded on attempt " .. i)
            return result
        else
            warn("[ATTEMPT " .. i .. "] Failed: " .. tostring(result))
            task.wait(1)
        end
    end
    return nil
end

Vict = LoadLibrary()
if not Vict then
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "ERROR",
        Text = "Failed to load UI library!",
        Duration = 5
    })
    return
end

print("[2] Creating window...")

-- Create window dengan ABSOLUTELY MINIMAL config
local Window
local success, err = pcall(function()
    Window = Vict:Window({
        Title = "Victoria Hub",
        -- Size = UDim2.new(0, 500, 0, 300),  -- COMENT DULU
    })
end)

if not success or not Window then
    warn("Window creation failed: " .. tostring(err))
    
    -- Try even simpler
    Window = Vict:Window()  -- No parameters at all!
end

if not Window then
    warn("Completely failed to create window")
    return
end

print("[3] Creating basic tab...")

-- Tab dengan NO EXTRA PARAMS
local Tab1 = Window:Tab("Main")  -- Mungkin formatnya gini, bukan table

if Tab1 then
    -- Coba kedua metode
    local section
    if type(Tab1.Section) == "function" then
        section = Tab1:Section("Controls")
    else
        -- Alternative
        section = Tab1.Section({Title = "Controls"})
    end
    
    if section then
        -- Button sederhana
        if section.Button then
            section:Button({
                Title = "Test",
                Callback = function()
                    print("Test button works!")
                    
                    -- Try to make notify
                    if Window.MakeNotify then
                        Window:MakeNotify({
                            Title = "Test",
                            Content = "UI is working!",
                            Duration = 2
                        })
                    end
                end
            })
            
            print("[SUCCESS] Basic UI created!")
        end
    end
end

-- ==================== ADD MORE FEATURES IF UI WORKS ====================
if Window and Window.Tab then
    -- Tab 2: Fishing
    local fishingTab = Window:Tab("Fishing")
    if fishingTab then
        local fishSection = fishingTab:Section("Auto Fish")
        
        _G.AutoFish = false
        
        fishSection:Toggle({
            Title = "Auto Fish",
            Default = false,
            Callback = function(state)
                _G.AutoFish = state
                print("Auto Fish: " .. tostring(state))
            end
        })
    end
end

print("[DONE] Victoria Hub initialized!")
